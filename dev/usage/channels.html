

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Channels &#8212; Litestar Framework</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/litestar-sphinx-theme.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/litestar-theme.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script src="https://unpkg.com/mermaid@10.2.0/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'usage/channels';</script>
    <script src="../_static/versioning.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Databases" href="databases/index.html" />
    <link rel="prev" title="JWT Security Backends" href="security/jwt.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
   

<a class="navbar-brand logo" href="https://litestar.dev">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.svg" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
    
  </div>
  
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">




    <nav class="hidden lg:flex lg:gap-x-4">
        
    
        
            <a href="../index.html"
               class="text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold select-none cursor-pointer">Documentation</a>
        
    
        
            
    <div class="relative">
        <span type="button"
                class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold st-dropdown-toggle dropdown-closed select-none cursor-pointer"
                data-dropdown-state="closed"
                aria-expanded="false">
            Community
            <div class="menu-state-indicator flex">
                
    <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor"
     aria-hidden="true">
    <path fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"/>
</svg>

            </div>
        </span>

        <div class="
            absolute -left-8 top-full z-10 mt-3
            w-max max-w-md
            overflow-hidden rounded-3xl
            bg-white shadow-lg dark:!bg-zinc-700 ring-1 ring-gray-900/5
            hidden
            st-dropdown-menu">
            <div class="p-4">
                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" fill="none"
     viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"/>
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"/>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://docs.litestar.dev/2/contribution-guide.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Contributing
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Learn how to contribute to the Litestar project</div>
            </div>
        </div>
    

                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" fill="none"
     viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59"/>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://github.com/litestar-org/.github/blob/main/CODE_OF_CONDUCT.md"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Code of Conduct
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Review the etiquette for interacting with the Litestar community</div>
            </div>
        </div>
    

                
            </div>
        </div>
    </div>

        
    
        
            
    <div class="relative">
        <span type="button"
                class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold st-dropdown-toggle dropdown-closed select-none cursor-pointer"
                data-dropdown-state="closed"
                aria-expanded="false">
            About
            <div class="menu-state-indicator flex">
                
    <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor"
     aria-hidden="true">
    <path fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"/>
</svg>

            </div>
        </span>

        <div class="
            absolute -left-8 top-full z-10 mt-3
            w-max max-w-md
            overflow-hidden rounded-3xl
            bg-white shadow-lg dark:!bg-zinc-700 ring-1 ring-gray-900/5
            hidden
            st-dropdown-menu">
            <div class="p-4">
                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" aria-hidden="true"
     fill="none" stroke="currentColor" stroke-width="1.5"
     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"
          stroke-linecap="round" stroke-linejoin="round"></path>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://litestar.dev/about/organization"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Litestar Organization
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Details about the Litestar organization</div>
            </div>
        </div>
    

                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" aria-hidden="true"
     fill="none" stroke="currentColor" stroke-width="1.5"
     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          stroke-linecap="round" stroke-linejoin="round"></path>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://litestar.dev/about/litestar-releases"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Releases
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Details about the Litestar release process</div>
            </div>
        </div>
    

                
            </div>
        </div>
    </div>

        
    
        
            
    <div class="relative">
        <span type="button"
                class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold st-dropdown-toggle dropdown-closed select-none cursor-pointer"
                data-dropdown-state="closed"
                aria-expanded="false">
            Release notes
            <div class="menu-state-indicator flex">
                
    <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor"
     aria-hidden="true">
    <path fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"/>
</svg>

            </div>
        </span>

        <div class="
            absolute -left-8 top-full z-10 mt-3
            w-max max-w-md
            overflow-hidden rounded-3xl
            bg-white shadow-lg dark:!bg-zinc-700 ring-1 ring-gray-900/5
            hidden
            st-dropdown-menu">
            <div class="p-4">
                
                    
    
        <div class="group relative rounded-lg p-2 text-sm hover:bg-gray-50 dark:hover:bg-zinc-800">
            
    <a href="../release-notes/whats-new-2.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        What's new in 2.0
        <span class="absolute inset-0"></span>
    </a>

        </div>
    

                
                    
    
        <div class="group relative rounded-lg p-2 text-sm hover:bg-gray-50 dark:hover:bg-zinc-800">
            
    <a href="https://docs.litestar.dev/2/release-notes/changelog.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        2.x Changelog
        <span class="absolute inset-0"></span>
    </a>

        </div>
    

                
                    
    
        <div class="group relative rounded-lg p-2 text-sm hover:bg-gray-50 dark:hover:bg-zinc-800">
            
    <a href="https://docs.litestar.dev/1/release-notes/changelog.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        1.x Changelog
        <span class="absolute inset-0"></span>
    </a>

        </div>
    

                
            </div>
        </div>
    </div>

        
    
        
            <a href="https://github.com/orgs/litestar-org/discussions"
               class="text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold select-none cursor-pointer">Help</a>
        
    

    </nav>
</div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/litestar-org/litestar" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://discord.gg/X3FJqy8d2j" title="Discord" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-discord"></i></span>
            <label class="sr-only">Discord</label></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">




    <nav class="hidden lg:flex lg:gap-x-4">
        
    
        
            <a href="../index.html"
               class="text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold select-none cursor-pointer">Documentation</a>
        
    
        
            
    <div class="relative">
        <span type="button"
                class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold st-dropdown-toggle dropdown-closed select-none cursor-pointer"
                data-dropdown-state="closed"
                aria-expanded="false">
            Community
            <div class="menu-state-indicator flex">
                
    <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor"
     aria-hidden="true">
    <path fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"/>
</svg>

            </div>
        </span>

        <div class="
            absolute -left-8 top-full z-10 mt-3
            w-max max-w-md
            overflow-hidden rounded-3xl
            bg-white shadow-lg dark:!bg-zinc-700 ring-1 ring-gray-900/5
            hidden
            st-dropdown-menu">
            <div class="p-4">
                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" fill="none"
     viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"/>
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"/>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://docs.litestar.dev/2/contribution-guide.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Contributing
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Learn how to contribute to the Litestar project</div>
            </div>
        </div>
    

                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" fill="none"
     viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round"
          d="M15.042 21.672L13.684 16.6m0 0l-2.51 2.225.569-9.47 5.227 7.917-3.286-.672zM12 2.25V4.5m5.834.166l-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243l-1.59-1.59"/>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://github.com/litestar-org/.github/blob/main/CODE_OF_CONDUCT.md"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Code of Conduct
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Review the etiquette for interacting with the Litestar community</div>
            </div>
        </div>
    

                
            </div>
        </div>
    </div>

        
    
        
            
    <div class="relative">
        <span type="button"
                class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold st-dropdown-toggle dropdown-closed select-none cursor-pointer"
                data-dropdown-state="closed"
                aria-expanded="false">
            About
            <div class="menu-state-indicator flex">
                
    <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor"
     aria-hidden="true">
    <path fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"/>
</svg>

            </div>
        </span>

        <div class="
            absolute -left-8 top-full z-10 mt-3
            w-max max-w-md
            overflow-hidden rounded-3xl
            bg-white shadow-lg dark:!bg-zinc-700 ring-1 ring-gray-900/5
            hidden
            st-dropdown-menu">
            <div class="p-4">
                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" aria-hidden="true"
     fill="none" stroke="currentColor" stroke-width="1.5"
     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m.94 3.198l.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0112 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 016 18.719m12 0a5.971 5.971 0 00-.941-3.197m0 0A5.995 5.995 0 0012 12.75a5.995 5.995 0 00-5.058 2.772m0 0a3 3 0 00-4.681 2.72 8.986 8.986 0 003.74.477m.94-3.197a5.971 5.971 0 00-.94 3.197M15 6.75a3 3 0 11-6 0 3 3 0 016 0zm6 3a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0zm-13.5 0a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"
          stroke-linecap="round" stroke-linejoin="round"></path>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://litestar.dev/about/organization"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Litestar Organization
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Details about the Litestar organization</div>
            </div>
        </div>
    

                
                    
    
        <div class="group relative flex items-center gap-x-6 rounded-lg p-4 text-sm leading-6 hover:bg-gray-50 dark:hover:bg-zinc-800">
            <div class="
            h-11 w-11 flex flex-none items-center justify-center
            rounded-lg
            bg-gray-50 group-hover:bg-white dark:bg-zinc-900 dark:group-hover:bg-zinc-700
            text-gray-600 dark:text-gray-300 group-hover:text-litestar-gold">
                
    <svg class="h-6 w-6" aria-hidden="true"
     fill="none" stroke="currentColor" stroke-width="1.5"
     viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          stroke-linecap="round" stroke-linejoin="round"></path>
</svg>

            </div>
            <div class="flex-auto">
                
    <a href="https://litestar.dev/about/litestar-releases"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        Releases
        <span class="absolute inset-0"></span>
    </a>

                <div class="mt-1 text-gray-600 dark:text-gray-300">Details about the Litestar release process</div>
            </div>
        </div>
    

                
            </div>
        </div>
    </div>

        
    
        
            
    <div class="relative">
        <span type="button"
                class="flex items-center gap-x-1 text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold st-dropdown-toggle dropdown-closed select-none cursor-pointer"
                data-dropdown-state="closed"
                aria-expanded="false">
            Release notes
            <div class="menu-state-indicator flex">
                
    <svg class="h-5 w-5 flex-none text-gray-400" viewBox="0 0 20 20" fill="currentColor"
     aria-hidden="true">
    <path fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"/>
</svg>

            </div>
        </span>

        <div class="
            absolute -left-8 top-full z-10 mt-3
            w-max max-w-md
            overflow-hidden rounded-3xl
            bg-white shadow-lg dark:!bg-zinc-700 ring-1 ring-gray-900/5
            hidden
            st-dropdown-menu">
            <div class="p-4">
                
                    
    
        <div class="group relative rounded-lg p-2 text-sm hover:bg-gray-50 dark:hover:bg-zinc-800">
            
    <a href="../release-notes/whats-new-2.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        What's new in 2.0
        <span class="absolute inset-0"></span>
    </a>

        </div>
    

                
                    
    
        <div class="group relative rounded-lg p-2 text-sm hover:bg-gray-50 dark:hover:bg-zinc-800">
            
    <a href="https://docs.litestar.dev/2/release-notes/changelog.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        2.x Changelog
        <span class="absolute inset-0"></span>
    </a>

        </div>
    

                
                    
    
        <div class="group relative rounded-lg p-2 text-sm hover:bg-gray-50 dark:hover:bg-zinc-800">
            
    <a href="https://docs.litestar.dev/1/release-notes/changelog.html"
       class="block font-semibold text-gray-900 dark:text-gray-200 hover:text-litestar-gold dark:hover:text-litestar-gold !no-underline select-none cursor-pointer">
        1.x Changelog
        <span class="absolute inset-0"></span>
    </a>

        </div>
    

                
            </div>
        </div>
    </div>

        
    
        
            <a href="https://github.com/orgs/litestar-org/discussions"
               class="text-sm font-semibold leading-6 text-gray-900 dark:text-gray-100 hover:!text-litestar-gold select-none cursor-pointer">Help</a>
        
    

    </nav>
</div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/litestar-org/litestar" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://discord.gg/X3FJqy8d2j" title="Discord" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-discord"></i></span>
            <label class="sr-only">Discord</label></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorials/todo-app/index.html">Developing a basic TODO application</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/0-application-basics.html">Application basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/1-accessing-the-list.html">Accessing the list</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/2-interacting-with-the-list.html">Making the list interactive</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/todo-app/3-assembling-the-app.html">Recap and assembling the final application</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorials/sqlalchemy/index.html">Improving the TODO app with SQLAlchemy</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/0-introduction.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/1-provide-session-with-di.html">Providing the session with DI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/2-serialization-plugin.html">Using the serialization plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/3-init-plugin.html">Using the init plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/sqlalchemy/4-final-touches-and-recap.html">Final touches and recap</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorials/dto-tutorial/index.html">Data Transfer Object Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/01-simple-dto-exclude.html">Our first DTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/02-nested-exclude.html">Excluding from nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/03-nested-collection-exclude.html">Excluding from collections of nested models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/04-max-nested-depth.html">Max nested depth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/05-renaming-fields.html">Renaming fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/06-receiving-data.html">Receiving data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/07-read-only-fields.html">Read only fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/08-dto-data.html">Accessing the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/09-updating.html">Updating instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/dto-tutorial/10-layered-dto-declarations.html">Declaring DTOs on app layers</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../tutorials/repository-tutorial/index.html">SQLAlchemy Repository Tutorial</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/01-modeling-and-features.html">Introduction to Database Modeling and Repository Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/02-repository-introduction.html">Interacting with repositories</a></li>

<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/03-repository-controller.html">Working with Controllers and Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tutorials/repository-tutorial/04-repository-other.html">Adding Additional Features to the Repository</a></li>

</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Usage</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="applications.html">Applications</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="routing/index.html">Routing</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="routing/overview.html">Routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/handlers.html">Route handlers</a></li>
<li class="toctree-l3"><a class="reference internal" href="routing/parameters.html">Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="requests.html">Requests</a></li>
<li class="toctree-l2"><a class="reference internal" href="responses.html">Responses</a></li>
<li class="toctree-l2"><a class="reference internal" href="dependency-injection.html">Dependency Injection</a></li>
<li class="toctree-l2"><a class="reference internal" href="websockets.html">WebSockets</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="dto/index.html">Data Transfer Object (DTO)</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="dto/0-basic-use.html">Basic Use</a></li>
<li class="toctree-l3"><a class="reference internal" href="dto/1-abstract-dto.html">AbstractDTO</a></li>
<li class="toctree-l3"><a class="reference internal" href="dto/2-creating-custom-dto-classes.html">Implementing Custom DTO Classes</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="middleware/index.html">Middleware</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="middleware/using-middleware.html">Using Middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="middleware/builtin-middleware.html">Built-in middleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="middleware/creating-middleware.html">Creating Middleware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="security/index.html">Security</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="security/abstract-authentication-middleware.html">AbstractAuthenticationMiddleware</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/security-backends.html">Security Backends</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/guards.html">Guards</a></li>
<li class="toctree-l3"><a class="reference internal" href="security/jwt.html">JWT Security Backends</a></li>
</ul>
</li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Channels</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="databases/index.html">Databases</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="databases/sqlalchemy/index.html">SQLAlchemy</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-12"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="databases/sqlalchemy/models_and_repository.html">SQLAlchemy Models &amp; Repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="databases/sqlalchemy/plugins/index.html">Plugins</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="databases/piccolo.html">Piccolo ORM</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions and exception handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="stores.html">Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="openapi.html">OpenAPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="lifecycle-hooks.html">Life Cycle Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching</a></li>
<li class="toctree-l2"><a class="reference internal" href="templating.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="static-files.html">Static Files</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="metrics/index.html">Metrics</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-13"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="metrics/open-telemetry.html">OpenTelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="metrics/prometheus.html">Prometheus</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="htmx.html">HTMX</a></li>
<li class="toctree-l2"><a class="reference internal" href="cli.html">CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">Debugging</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API reference</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-14"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/app.html">app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/background_tasks.html">background_tasks</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/channels/index.html">channels</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-15"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/plugin.html">plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/channels/subscriber.html">subscriber</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/channels/backends/index.html">backends</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-16"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/memory.html">memory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/channels/backends/redis.html">redis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli.html">cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/config.html">config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/connection.html">connection</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/contrib/index.html">contrib</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-17"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/htmx.html">HTMX</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/jinja.html">jinja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/jwt.html">jwt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/mako.html">mako</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/opentelemetry.html">opentelemetry</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/piccolo.html">piccolo_orm</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/contrib/pydantic.html">pydantic</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/contrib/repository/index.html">repository</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-18"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/repository/abc.html">abc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/repository/filters.html">filters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/repository/exceptions.html">exceptions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/repository/testing.html">testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/repository/handlers.html">handlers</a></li>
</ul>
</li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/contrib/sqlalchemy/index.html">sqlalchemy</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-19"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/plugins.html">plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/repository.html">repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/types.html">types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/contrib/sqlalchemy/dto.html">DTO</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/controller.html">controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/data_extractors.html">data_extractors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/datastructures.html">datastructures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/di.html">di</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/dto/index.html">dto</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-20"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/data_structures.html">data_structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/field.html">field</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/types.html">types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/base_dto.html">base_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/msgspec_dto.html">msgspec_dto</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/dto/dataclass_dto.html">dataclass_dto</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/enums.html">enums</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/events.html">events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/exceptions.html">exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/handlers.html">handlers</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/logging/index.html">logging</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-21"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/config.html">config</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/picologging.html">picologging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/logging/standard.html">standard</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/middleware/index.html">middleware</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-22"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/allowed_hosts.html">allowed_hosts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/authentication.html">authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/compression.html">compression</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/cors.html">cors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/csrf.html">csrf</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/logging.html">logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/middleware/rate_limit.html">rate_limit</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/middleware/session/index.html">session</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-23"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/base.html">base</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/client_side.html">client_side</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/middleware/session/server_side.html">server_side</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/openapi/index.html">openapi</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-24"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/openapi.html">openapi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/openapi/spec.html">spec</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/pagination.html">pagination</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/params.html">params</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/plugins.html">plugins</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/response/index.html">response</a><input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-25"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/redirect.html">redirect</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/streaming.html">streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/sse.html">SSE (Server Sent Events)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/response/template.html">template</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/router.html">router</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/routes.html">routes</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/security/index.html">security</a><input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-26"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/security/session_auth.html">session_auth</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/serialization.html">serialization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/static_files.html">static_files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/status_codes.html">status_code</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/stores/index.html">stores</a><input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-27"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/base.html">base</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/file.html">file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/memory.html">memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/redis.html">redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/stores/registry.html">registry</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/template.html">template</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/testing.html">testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/types.html">types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/typing.html">typing</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../topics/index.html">Topics</a><input class="toctree-checkbox" id="toctree-checkbox-28" name="toctree-checkbox-28" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-28"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../topics/sync-vs-async.html">Sync vs. Async</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../migration/index.html">Migrating to Litestar</a><input class="toctree-checkbox" id="toctree-checkbox-29" name="toctree-checkbox-29" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-29"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../migration/flask.html">From Flask</a></li>
<li class="toctree-l2"><a class="reference internal" href="../migration/fastapi.html">From Starlette / FastAPI</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../benchmarks.html">Benchmarks</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Usage</a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Channels</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="channels">
<h1>Channels<a class="headerlink" href="#channels" title="Permalink to this heading">#</a></h1>
<p><strong>Channels</strong> are a group of related functionalities, built to facilitate the routing
of event streams, which for example can be used to broadcast messages to WebSocket
clients.</p>
<p>Channels provide:</p>
<ol class="arabic simple">
<li><p>Independent <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a> backends, optionally handling inter-process communication
and data persistence on demand</p></li>
<li><p>“Channel” based subscription management</p></li>
<li><p>Subscriber objects as an abstraction over an individualized <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>,
providing background workers and managed subscriptions</p></li>
<li><p>Synchronous and asynchronous data publishing</p></li>
<li><p>Optional history management on a per-channel basis</p></li>
<li><p><a class="reference internal" href="websockets.html"><span class="doc">WebSocket</span></a> integration, generating WebSocket route
handlers for an application, to handle the subscription and publishing of incoming
events to the connected client</p></li>
</ol>
<section id="basic-concepts">
<h2>Basic concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this heading">#</a></h2>
<p>Utilizing channels involves a few moving parts, of which the most important ones are:</p>
<dl class="simple glossary">
<dt id="term-event">event<a class="headerlink" href="#term-event" title="Permalink to this term">#</a></dt><dd><p>A single piece of data published to, or received from a <a class="reference internal" href="#term-backend"><span class="xref std std-term">backend</span></a> bound
to the channel it was originally published to</p>
</dd>
<dt id="term-event-stream">event stream<a class="headerlink" href="#term-event-stream" title="Permalink to this term">#</a></dt><dd><p>A stream of <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a>, consisting of events from all the channels a
<a class="reference internal" href="#term-subscriber"><span class="xref std std-term">Subscriber</span></a> has previously subscribed to</p>
</dd>
<dt id="term-subscriber">subscriber<a class="headerlink" href="#term-subscriber" title="Permalink to this term">#</a></dt><dd><p>A <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a>: An object wrapping an
<a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a> and providing access to it through various methods</p>
</dd>
<dt id="term-backend">backend<a class="headerlink" href="#term-backend" title="Permalink to this term">#</a></dt><dd><p>A <a class="reference internal" href="../reference/channels/backends/base.html#litestar.channels.backends.base.ChannelsBackend" title="litestar.channels.backends.base.ChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsBackend</span></code></a>. This object
manages communication between the plugin and the <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a>, publishing
messages to and receiving messages from it. Each plugin instance is associated
with exactly one backend.</p>
</dd>
<dt id="term-broker">broker<a class="headerlink" href="#term-broker" title="Permalink to this term">#</a></dt><dd><p>Responsible for receiving and publishing messages to all connected
<a class="reference internal" href="#term-backend"><span class="xref std std-term">backends</span></a>; All backends sharing the same broker will have
access to the same messages, allowing for inter-process communication. This is
typically handled by a separate entity like <a class="reference external" href="https://redis.io/">Redis</a></p>
</dd>
<dt id="term-plugin">plugin<a class="headerlink" href="#term-plugin" title="Permalink to this term">#</a></dt><dd><p>The <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a>, a central instance
managing <a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscribers</span></a>, reading messages from the
<a class="reference internal" href="#term-backend"><span class="xref std std-term">backend</span></a>, putting them in the appropriate <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>, and
publishing data to the backend</p>
</dd>
</dl>
<section id="flowcharts">
<h3>Flowcharts<a class="headerlink" href="#flowcharts" title="Permalink to this heading">#</a></h3>
<figure class="align-center" id="id1">
<div class="mermaid">
            flowchart LR
    Backend(Backend) --&gt; Broker[(Broker)]

    Plugin{{Plugin}} --&gt; Backend

    Application[[Application]] --&gt; Plugin
        </div><figcaption>
<p><span class="caption-text">Publishing flow from the application to the <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a></span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id2">
<div class="mermaid">
            flowchart TD
    Broker[(Broker)]

    Broker --&gt; Backend_1(Backend)
    Broker --&gt; Backend_2(Backend)

    Backend_1 --&gt; Plugin_1{{Plugin}}
    Backend_2 --&gt; Plugin_2{{Plugin}}

    Plugin_1 --&gt; Subscriber_1[Subscriber]
    Plugin_1 --&gt; Subscriber_2[Subscriber]
    Plugin_1 --&gt; Subscriber_3[Subscriber]

    Plugin_2 --&gt; Subscriber_4[Subscriber]
    Plugin_2 --&gt; Subscriber_5[Subscriber]
    Plugin_2 --&gt; Subscriber_6[Subscriber]
        </div><figcaption>
<p><span class="caption-text">Fanout flow of data from the <a class="reference internal" href="#term-broker"><span class="xref std std-term">broker</span></a> to the sockets, showing multiple plugin instances</span><a class="headerlink" href="#id2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
</section>
<section id="the-channelsplugin">
<h2>The <code class="docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code><a class="headerlink" href="#the-channelsplugin" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a> acts as the central entity for managing channels and
subscribers. It’s used to publish messages, control how data is stored, and manage
subscribers, route handlers, and configuration.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The plugin makes itself available as a dependency under the <code class="docutils literal notranslate"><span class="pre">channels</span></code> key, which
means it’s not necessary to import it and instead, it can be used from within route
handlers or other callables within the dependency tree directly</p>
</div>
<section id="configuring-the-channels">
<h3>Configuring the channels<a class="headerlink" href="#configuring-the-channels" title="Permalink to this heading">#</a></h3>
<p>The channels managed by the plugin can be either defined upfront, passing them to the
<code class="docutils literal notranslate"><span class="pre">channels</span></code> argument, or created “on the fly” (i.e. on the first subscription to a
channel) by setting <code class="docutils literal notranslate"><span class="pre">arbitrary_channels_allowed=True</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Passing channels explicitly</span><a class="headerlink" href="#id3" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>

<span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Allowing arbitrary channels</span><a class="headerlink" href="#id4" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>

<span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">arbitrary_channels_allowed</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">arbitrary_channels_allowed</span></code> is not <code class="docutils literal notranslate"><span class="pre">True</span></code>, trying to publish or subscribe to a
channel not passed to <code class="docutils literal notranslate"><span class="pre">channels</span></code> will raise a <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsException" title="litestar.channels.plugin.ChannelsException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ChannelsException</span></code></a>.</p>
</section>
<section id="publishing-data">
<h3>Publishing data<a class="headerlink" href="#publishing-data" title="Permalink to this heading">#</a></h3>
<p>One of the core aspects of the plugin is publishing data, which is done through its
<a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish</span></code></a> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">channels</span><span class="o">.</span><span class="n">publish</span><span class="p">({</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span> <span class="s2">&quot;general&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The above example will publish the data to the channel <code class="docutils literal notranslate"><span class="pre">general</span></code>, subsequently putting
it into all subscriber’s <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a> to be consumed.</p>
<p>This method is non-blocking, even though channels and the associated
<a class="reference internal" href="#term-backend"><span class="xref std std-term">backends</span></a> are fundamentally asynchronous.</p>
<p>Calling <code class="docutils literal notranslate"><span class="pre">publish</span></code> effectively enqueues a message to be sent to the backend, from which
follows that there’s no guarantee that an event will be available in the backend
immediately after this call.</p>
<p>Alternatively, the asynchronous <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.wait_published" title="litestar.channels.plugin.ChannelsPlugin.wait_published"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_published</span></code></a>
method can be used, which skips the internal message queue, publishing the data to the
backend directly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While calling <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish</span></code></a> does not guarantee the
message is sent to the backend immediately, it will be sent there <em>eventually</em>; On
shutdown, the plugin will wait for all queues to empty</p>
</div>
</section>
<section id="managing-subscriptions">
<h3>Managing subscriptions<a class="headerlink" href="#managing-subscriptions" title="Permalink to this heading">#</a></h3>
<p>Another core functionality of the plugin is managing subscriptions, for which two
different approaches exist:</p>
<ol class="arabic simple">
<li><p>Manually through the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.subscribe" title="litestar.channels.plugin.ChannelsPlugin.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe</span></code></a> and
<a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.unsubscribe" title="litestar.channels.plugin.ChannelsPlugin.unsubscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unsubscribe</span></code></a> methods</p></li>
<li><p>By using the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.start_subscription" title="litestar.channels.plugin.ChannelsPlugin.start_subscription"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_subscription</span></code></a> context
manager</p></li>
</ol>
<p>Both <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.subscribe" title="litestar.channels.plugin.ChannelsPlugin.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe</span></code></a> and
<a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.start_subscription" title="litestar.channels.plugin.ChannelsPlugin.start_subscription"><code class="xref py py-meth docutils literal notranslate"><span class="pre">start_subscription</span></code></a> produce a
<a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a>, which can be used to interact with the streams of events subscribed
to.</p>
<p>The context manager should be preferred, since it ensures that channels are being
unsubscribed. Using the <code class="docutils literal notranslate"><span class="pre">subscriber</span></code> and <code class="docutils literal notranslate"><span class="pre">unsubscribe</span></code> methods directly should only
be done when a context manager cannot be used, e.g. when the subscription would span
different contexts.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Calling the subscription methods manually</span><a class="headerlink" href="#id5" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">subscriber</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
<span class="k">try</span><span class="p">:</span>
    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
<span class="k">finally</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Using the context manager</span><a class="headerlink" href="#id6" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
</pre></div>
</div>
</div>
<p>It is also possible to unsubscribe from individual channels, which may be desirable if
subscriptions need to be managed dynamically.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">subscriber</span> <span class="o">=</span> <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span>
<span class="o">...</span>  <span class="c1"># do some stuff here</span>
<span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>Or, using the context manager</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">start_subscription</span><span class="p">([</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
    <span class="o">...</span>  <span class="c1"># do some stuff here</span>
    <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="managing-history">
<h3>Managing history<a class="headerlink" href="#managing-history" title="Permalink to this heading">#</a></h3>
<p>Some backends support per-channel history, keeping a certain amount of
<a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a> in storage. This history can then be pushed to a
<a class="reference internal" href="#term-subscriber"><span class="xref std std-term">subscriber</span></a>.</p>
<p>The plugin’s <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.put_subscriber_history" title="litestar.channels.plugin.ChannelsPlugin.put_subscriber_history"><code class="xref py py-meth docutils literal notranslate"><span class="pre">put_subscriber_history</span></code></a> can
be used to fetch this history and put it into a subscriber’s <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar</span> <span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">websocket</span>
<span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.backends.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>


<span class="nd">@websocket</span><span class="p">(</span><span class="s2">&quot;/ws&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">channels</span><span class="p">:</span> <span class="n">ChannelsPlugin</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">channels</span><span class="o">.</span><span class="n">put_subscriber_history</span><span class="p">(</span><span class="n">subscriber</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;some_channel&quot;</span><span class="p">],</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
    <span class="p">[</span><span class="n">handler</span><span class="p">],</span>
    <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">ChannelsPlugin</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="mi">20</span><span class="p">))],</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The publication of the history happens sequentially, one channel and one
event at a time. This is done to ensure the correct ordering of events and to avoid
filling up a subscriber’s backlog, which would result in dropped history entries. Should the
amount of entries exceed the maximum backlog size, the execution will wait until
previous events have been processed.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><cite>Managing backpressure</cite></p>
</div>
</div>
</section>
</section>
<section id="the-subscriber">
<h2>The <code class="docutils literal notranslate"><span class="pre">Subscriber</span></code><a class="headerlink" href="#the-subscriber" title="Permalink to this heading">#</a></h2>
<p>The <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a> manages an individual <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>, provided to it by
the plugin, representing the sum of events from all channels the subscriber has
subscribed to.</p>
<p>It can be considered the endpoint of all events, while the backends act as the source,
and the plugin as a router, being responsible for supplying events gathered from the
backend into the appropriate subscriber’s streams.</p>
<p>In addition to being an abstraction of an <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>, the <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber" title="litestar.channels.subscriber.Subscriber"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscriber</span></code></a>
provides two methods to handle this stream:</p>
<dl>
<dt><a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a></dt><dd><p>An asynchronous generator, producing one event from the stream at a time, waiting
until the next one becomes available</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a></dt><dd><p>A context manager, wrapping an <a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#asyncio.Task" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">asyncio.Task</span></code></a>, consuming events yielded by
<a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a>, invoking a provided callback for each
of them. Upon exit, it will attempt a graceful shutdown of the running task, waiting
for all currently enqueued events in the stream to be processed. If the context
exits with an error, the task will be cancelled instead.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It’s possible to force the task to stop immediately, by passing <code class="docutils literal notranslate"><span class="pre">join=False</span></code> to
<a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a>, which will
lead to the cancellation of the task. By default this only happens when the context is
left with an exception.</p>
</div>
</dd>
</dl>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a> in the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event streams</span></a> are always
bytes; When calling <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin.publish" title="litestar.channels.plugin.ChannelsPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ChannelsPlugin.publish()</span></code></a>, data will be serialized before
being sent to the backend.</p>
</div>
<section id="consuming-the-event-stream">
<h3>Consuming the event stream<a class="headerlink" href="#consuming-the-event-stream" title="Permalink to this heading">#</a></h3>
<p>There are two general methods of consuming the <a class="reference internal" href="#term-event-stream"><span class="xref std std-term">event stream</span></a>:</p>
<ol class="arabic simple">
<li><p>By iterating over it directly, using <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a></p></li>
<li><p>By using the <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a> context manager,
which starts a background task, iterating over the stream, invoking a provided
callback for every <a class="reference internal" href="#term-event"><span class="xref std std-term">event</span></a> received</p></li>
</ol>
<p>Iterating over the stream directly is mostly useful if processing the events is the only
concern, since <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a> is effectively an infinite
loop. For all other applications, using the context manager is preferable, since it
allows to easily run other code concurrently.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar</span> <span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">websocket</span>
<span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.backends.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>


<span class="nd">@websocket</span><span class="p">(</span><span class="s2">&quot;/ws&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">channels</span><span class="p">:</span> <span class="n">ChannelsPlugin</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">subscriber</span><span class="o">.</span><span class="n">iter_events</span><span class="p">():</span>
            <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">send_text</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
    <span class="p">[</span><span class="n">handler</span><span class="p">],</span>
    <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">ChannelsPlugin</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">())],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>In the above example, the stream is used to send data to a
<a class="reference internal" href="../reference/connection.html#litestar.connection.WebSocket" title="litestar.connection.WebSocket"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocket</span></code></a>.</p>
<p>The same can be achieve by passing
<a class="reference internal" href="../reference/connection.html#litestar.connection.WebSocket.send_text" title="litestar.connection.WebSocket.send_text"><code class="xref py py-meth docutils literal notranslate"><span class="pre">WebbSocket.send_text</span></code></a> as the callback
to <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.run_in_background" title="litestar.channels.subscriber.Subscriber.run_in_background"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_in_background</span></code></a>. This will cause the
WebSocket’s method to be invoked every time a new event becomes available in the stream,
but gives control back to the application, providing an opportunity to perform other
tasks, such as receiving incoming data from the socket.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar</span> <span class="kn">import</span> <span class="n">Litestar</span><span class="p">,</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">websocket</span>
<span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.backends.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>


<span class="nd">@websocket</span><span class="p">(</span><span class="s2">&quot;/ws&quot;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">socket</span><span class="p">:</span> <span class="n">WebSocket</span><span class="p">,</span> <span class="n">channels</span><span class="p">:</span> <span class="n">ChannelsPlugin</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">with</span> <span class="n">channels</span><span class="o">.</span><span class="n">subscribe</span><span class="p">([</span><span class="s2">&quot;some_channel&quot;</span><span class="p">])</span> <span class="k">as</span> <span class="n">subscriber</span><span class="p">,</span> <span class="n">subscriber</span><span class="o">.</span><span class="n">run_in_background</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">send_text</span><span class="p">):</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">socket</span><span class="o">.</span><span class="n">receive_text</span><span class="p">()</span>
            <span class="c1"># do something with the message here</span>


<span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span>
    <span class="p">[</span><span class="n">handler</span><span class="p">],</span>
    <span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">ChannelsPlugin</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">())],</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Iterating over <a class="reference internal" href="../reference/channels/subscriber.html#litestar.channels.subscriber.Subscriber.iter_events" title="litestar.channels.subscriber.Subscriber.iter_events"><code class="xref py py-meth docutils literal notranslate"><span class="pre">iter_events</span></code></a> should be approached
with caution when being used together with WebSockets.</p>
<p>Since <a class="reference internal" href="../reference/exceptions.html#litestar.exceptions.WebSocketDisconnect" title="litestar.exceptions.WebSocketDisconnect"><code class="xref py py-exc docutils literal notranslate"><span class="pre">WebSocketDisconnect</span></code></a> is only raised after the corresponding ASGI event
has been <em>received</em>, it can result in an indefinitely suspended coroutine. This can
happen if for example the client disconnects, but no further events are received.
The generator will then wait for new events, but since it will never receive any,
no <code class="docutils literal notranslate"><span class="pre">send</span></code> call on the WebSocket will be made, which in turn means no exception
will be raised to break the loop.</p>
</div>
</section>
</section>
<section id="managing-backpressure">
<h2>Managing backpressure<a class="headerlink" href="#managing-backpressure" title="Permalink to this heading">#</a></h2>
<p>Each subscriber manages its own backlog: A queue of unprocessed <a class="reference internal" href="#term-event"><span class="xref std std-term">events</span></a>.
By default, this backlog is unlimited in size, allowing it to grow indefinitely. For
most applications, this should be no issue, but when the recipient consistently can’t
process messages faster than they come in, an application might opt to handle this case.</p>
<p>The channels plugin provides two different strategies for managing this backpressure:</p>
<ol class="arabic simple">
<li><p>A backoff strategy, dropping newly incoming messages as long as the backlog is full</p></li>
<li><p>An eviction strategy, dropping the oldest message in the backlog when a new one is
added while the backlog is full</p></li>
</ol>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Backoff strategy</span><a class="headerlink" href="#id7" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>

<span class="n">channels</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span>
    <span class="n">max_backlog</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">backlog_strategy</span><span class="o">=</span><span class="s2">&quot;backoff&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Eviction strategy</span><a class="headerlink" href="#id8" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>

<span class="n">channels</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span>
    <span class="n">max_backlog</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">backlog_strategy</span><span class="o">=</span><span class="s2">&quot;dropleft&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="backends">
<h2>Backends<a class="headerlink" href="#backends" title="Permalink to this heading">#</a></h2>
<p>The storing and fanout of messages is handled by a
<a class="reference internal" href="../reference/channels/backends/base.html#litestar.channels.backends.base.ChannelsBackend" title="litestar.channels.backends.base.ChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsBackend</span></code></a>. Currently
implemented are:</p>
<dl class="simple">
<dt><a class="reference internal" href="../reference/channels/backends/memory.html#litestar.channels.backends.memory.MemoryChannelsBackend" title="litestar.channels.backends.memory.MemoryChannelsBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">MemoryChannelsBacked</span></code></a></dt><dd><p>A basic in-memory backend, mostly useful for testing and local development, but
still fully capable. Since it stores all data in-process, it can achieve the highest
performance of all the backends, but at the same time is not suitable for
applications running on multiple processes.</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/backends/redis.html#litestar.channels.backends.redis.RedisChannelsPubSubBackend" title="litestar.channels.backends.redis.RedisChannelsPubSubBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisChannelsPubSubBackend</span></code></a></dt><dd><p>A Redis based backend, using <a class="reference external" href="https://redis.io/docs/manual/pubsub/">Pub/Sub</a> to
delivery messages. This Redis backend has a low latency and overhead and is
generally recommended if history is not needed</p>
</dd>
<dt><a class="reference internal" href="../reference/channels/backends/redis.html#litestar.channels.backends.redis.RedisChannelsStreamBackend" title="litestar.channels.backends.redis.RedisChannelsStreamBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisChannelsStreamBackend</span></code></a></dt><dd><p>A redis based backend, using <a class="reference external" href="https://redis.io/docs/data-types/streams/">streams</a>
to deliver messages. It has a slightly higher latency when publishing than the
Pub/Sub backend, but achieves the same throughput in message fanout. Recommended
when history is needed</p>
</dd>
</dl>
</section>
<section id="integrating-with-websocket-handlers">
<h2>Integrating with websocket handlers<a class="headerlink" href="#integrating-with-websocket-handlers" title="Permalink to this heading">#</a></h2>
<section id="generating-route-handlers">
<h3>Generating route handlers<a class="headerlink" href="#generating-route-handlers" title="Permalink to this heading">#</a></h3>
<p>A common pattern is to create a route handler per channel, sending data to the connected
client from that channel. This can be fully automated, using the plugin to create these
route handlers.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Setting <code class="docutils literal notranslate"><span class="pre">create_route_handlers=True</span></code> will create route handlers for all <code class="docutils literal notranslate"><span class="pre">channels</span></code></span><a class="headerlink" href="#id9" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar</span> <span class="kn">import</span> <span class="n">Litestar</span>
<span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.backends.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>

<span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(),</span>
    <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
    <span class="n">create_ws_route_handlers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">channels_plugin</span><span class="p">])</span>
</pre></div>
</div>
</div>
<p>The generated route handlers can optionally be configured to send the channel’s history
after a client has connected:</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Sending the first 10 history entries after a client connects</span><a class="headerlink" href="#id10" title="Permalink to this code">#</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">litestar</span> <span class="kn">import</span> <span class="n">Litestar</span>
<span class="kn">from</span> <span class="nn">litestar.channels</span> <span class="kn">import</span> <span class="n">ChannelsPlugin</span>
<span class="kn">from</span> <span class="nn">litestar.channels.backends.memory</span> <span class="kn">import</span> <span class="n">MemoryChannelsBackend</span>

<span class="n">channels_plugin</span> <span class="o">=</span> <span class="n">ChannelsPlugin</span><span class="p">(</span>
    <span class="n">backend</span><span class="o">=</span><span class="n">MemoryChannelsBackend</span><span class="p">(</span><span class="n">history</span><span class="o">=</span><span class="mi">10</span><span class="p">),</span>  <span class="c1"># set the amount of messages per channel</span>
    <span class="c1"># to keep in the backend</span>
    <span class="n">channels</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">],</span>
    <span class="n">create_ws_route_handlers</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">ws_handler_send_history</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>  <span class="c1"># send 10 entries of the history by default</span>
<span class="p">)</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Litestar</span><span class="p">(</span><span class="n">plugins</span><span class="o">=</span><span class="p">[</span><span class="n">channels_plugin</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">arbitrary_channels_allowed</span></code> flag on the <a class="reference internal" href="../reference/channels/plugin.html#litestar.channels.plugin.ChannelsPlugin" title="litestar.channels.plugin.ChannelsPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a>, a
single route handler will be generated instead, using a
<a class="reference internal" href="routing/parameters.html#path-parameters"><span class="std std-ref">path parameter</span></a> to specify the channel name</p>
</div>
</section>
</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="security/jwt.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">JWT Security Backends</p>
      </div>
    </a>
    <a class="right-next"
       href="databases/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Databases</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-concepts">Basic concepts</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flowcharts">Flowcharts</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-channelsplugin">The <code class="docutils literal notranslate"><span class="pre">ChannelsPlugin</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#configuring-the-channels">Configuring the channels</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#publishing-data">Publishing data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-subscriptions">Managing subscriptions</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-history">Managing history</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-subscriber">The <code class="docutils literal notranslate"><span class="pre">Subscriber</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#consuming-the-event-stream">Consuming the event stream</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#managing-backpressure">Managing backpressure</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#backends">Backends</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#integrating-with-websocket-handlers">Integrating with websocket handlers</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generating-route-handlers">Generating route handlers</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2023, Litestar-Org.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>